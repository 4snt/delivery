%%{init: {'theme': 'neutral', 'themeVariables': { 'primaryColor': '#fdf2ff', 'primaryBorderColor': '#9333ea', 'primaryTextColor': '#2d0a4e', 'secondaryColor': '#ede9fe', 'lineColor': '#7c3aed', 'fontFamily': 'Inter', 'background': 'transparent' }}}%%
sequenceDiagram
    autonumber
    participant Controller
    participant Factory as "makeCreate\nCustomerUseCase"
    participant UseCase as "CreateCustomer\nUseCase"
    box "Infra"
        participant Repo as "PrismaCustomer\nRepository"
        participant Hash as "BCryptHash\nProvider"
    end

    Controller->>Factory: solicita instância
    activate Factory
    Factory->>Repo: cria adapter Prisma
    Factory->>Hash: cria provider de hash
    Factory->>UseCase: injeta dependências
    deactivate Factory
    Factory-->>Controller: retorna caso de uso
    Controller->>UseCase: execute(dto)
    UseCase->>Repo: persiste cliente
    Repo-->>UseCase: Customer
    UseCase-->>Controller: Either<Sucesso>
